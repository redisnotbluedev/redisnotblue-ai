{
	"$schema": "http://json-schema.org/draft-07/schema#",
	"description": "Configuration schema for the OpenAI-compatible proxy server",
	"type": "object",
	"required": ["providers", "models"],
	"additionalProperties": false,
	"properties": {
		"providers": {
			"type": "object",
			"description": "External API service providers (OpenAI, custom endpoints, etc.)",
			"minProperties": 1,
			"additionalProperties": {
				"type": "object",
				"description": "Provider configuration",
				"required": ["type", "api_keys"],
				"additionalProperties": false,
				"properties": {
					"type": {
						"type": "string",
						"enum": ["openai", "copilot"],
						"description": "Provider type. Supports openai and copilot, see PROVIDERS.md for more information."
					},
					"base_url": {
						"type": "string",
						"pattern": "^https?://",
						"description": "API endpoint URL (without /chat/completions suffix)"
					},
					"chat_completions_path": {
						"type": "string",
						"description": "Override path to the Chat Completions API (without base URL)."
					},
					"api_keys": {
						"type": "array",
						"description": "List of API keys for this provider",
						"minItems": 1,
						"items": { "type": "string", "description": "API key" }
					},
					"rate_limits": {
						"$ref": "#/definitions/rateLimits",
						"description": "Default rate limits for all models using this provider"
					},
					"timeout": {
						"type": "integer",
						"minimum": 1,
						"default": 60,
						"description": "Request timeout in seconds"
					},
					"api_key": {
						"type": "string",
						"description": "Single API key for this provider (alternative to api_keys array)"
					},
					"credits_gain_per_minute": {
						"type": "number",
						"minimum": 0,
						"description": "Credits gained per minute for this provider (provider-level configuration)"
					},
					"credits_gain_per_hour": {
						"type": "number",
						"minimum": 0,
						"description": "Credits gained per hour for this provider (provider-level configuration)"
					},
					"credits_gain_per_day": {
						"type": "number",
						"minimum": 0,
						"description": "Credits gained per day for this provider (provider-level configuration)"
					},
					"credits_gain_per_month": {
						"type": "number",
						"minimum": 0,
						"description": "Credits gained per month for this provider (provider-level configuration)"
					},
					"credits_max_per_minute": {
						"type": "number",
						"minimum": 0,
						"description": "Maximum credits that can be accumulated per minute for this provider (defaults to credits_gain_per_minute)"
					},
					"credits_max_per_hour": {
						"type": "number",
						"minimum": 0,
						"description": "Maximum credits that can be accumulated per hour for this provider (defaults to credits_gain_per_hour)"
					},
					"credits_max_per_day": {
						"type": "number",
						"minimum": 0,
						"description": "Maximum credits that can be accumulated per day for this provider (defaults to credits_gain_per_day)"
					},
					"credits_max_per_month": {
						"type": "number",
						"minimum": 0,
						"description": "Maximum credits that can be accumulated per month for this provider (defaults to credits_gain_per_month)"
					}
				}
			}
		},
		"models": {
			"type": "object",
			"description": "Logical models that route to one or more providers",
			"minProperties": 1,
			"additionalProperties": {
				"type": "object",
				"description": "Model configuration",
				"required": ["providers"],
				"additionalProperties": false,
				"properties": {
					"providers": {
						"type": "object",
						"description": "Provider configurations for this model",
						"minProperties": 1,
						"additionalProperties": {
							"type": "object",
							"description": "Per-provider model configuration",
							"additionalProperties": false,
							"properties": {
								"priority": {
									"type": "integer",
									"minimum": -9999,
									"default": 0,
									"description": "Lower value = higher priority. Used for load balancing."
								},
								"model_id": {
									"oneOf": [
										{
											"type": "string",
											"description": "The model name/ID to use when calling this provider"
										},
										{
											"type": "array",
											"description": "List of model IDs to round-robin through when calling this provider",
											"minItems": 1,
											"items": { "type": "string" }
										}
									]
								},
								"api_keys": {
									"type": "array",
									"description": "Override provider's API keys for this specific model",
									"items": { "type": "string" }
								},
								"api_key": {
									"type": "string",
									"description": "Single API key override for this specific model"
								},
								"rate_limits": {
									"type": "object",
									"description": "Rate limit configuration for these API keys",
									"additionalProperties": false,
									"properties": {
										"requests_per_minute": {
											"type": "integer",
											"minimum": 1,
											"description": "Max API calls per 60 seconds"
										},
										"requests_per_hour": {
											"type": "integer",
											"minimum": 1,
											"description": "Max API calls per 3600 seconds"
										},
										"requests_per_day": {
											"type": "integer",
											"minimum": 1,
											"description": "Max API calls per 86400 seconds (24 hours)"
										},
										"requests_per_month": {
											"type": "integer",
											"minimum": 1,
											"description": "Max API calls per 2592000 seconds (30 days)"
										},
										"tokens_per_minute": {
											"type": "integer",
											"minimum": 1,
											"description": "Max tokens per 60 seconds"
										},
										"tokens_per_hour": {
											"type": "integer",
											"minimum": 1,
											"description": "Max tokens per 3600 seconds"
										},
										"tokens_per_day": {
											"type": "integer",
											"minimum": 1,
											"description": "Max tokens per 86400 seconds (24 hours)"
										},
										"tokens_per_month": {
											"type": "integer",
											"minimum": 1,
											"description": "Max tokens per 2592000 seconds (30 days)"
										},
										"in_tokens_per_minute": {
											"type": "integer",
											"minimum": 1,
											"description": "Max input tokens per 60 seconds"
										},
										"in_tokens_per_hour": {
											"type": "integer",
											"minimum": 1,
											"description": "Max input tokens per 3600 seconds"
										},
										"in_tokens_per_day": {
											"type": "integer",
											"minimum": 1,
											"description": "Max input tokens per 86400 seconds (24 hours)"
										},
										"in_tokens_per_month": {
											"type": "integer",
											"minimum": 1,
											"description": "Max input tokens per 2592000 seconds (30 days)"
										},
										"out_tokens_per_minute": {
											"type": "integer",
											"minimum": 1,
											"description": "Max output tokens per 60 seconds"
										},
										"out_tokens_per_hour": {
											"type": "integer",
											"minimum": 1,
											"description": "Max output tokens per 3600 seconds"
										},
										"out_tokens_per_day": {
											"type": "integer",
											"minimum": 1,
											"description": "Max output tokens per 86400 seconds (24 hours)"
										},
										"out_tokens_per_month": {
											"type": "integer",
											"minimum": 1,
											"description": "Max output tokens per 2592000 seconds (30 days)"
										},
										"credits_per_minute": {
											"type": "number",
											"minimum": 0,
											"description": "Max credits per 60 seconds (resets at top of minute)"
										},
										"credits_per_hour": {
											"type": "number",
											"minimum": 0,
											"description": "Max credits per hour (resets at top of hour)"
										},
										"credits_per_day": {
											"type": "number",
											"minimum": 0,
											"description": "Max credits per day (resets at midnight UTC)"
										},
										"credits_per_month": {
											"type": "number",
											"minimum": 0,
											"description": "Max credits per month (resets on 1st at 00:00 UTC)"
										}
									}
								},
								"credits_per_token": {
									"type": "number",
									"minimum": 0,
									"description": "Credit cost per token (total)"
								},
								"credits_per_million_tokens": {
									"type": "number",
									"minimum": 0,
									"description": "Credit cost per million tokens (total)"
								},
								"credits_per_in_token": {
									"type": "number",
									"minimum": 0,
									"description": "Credit cost per input token"
								},
								"credits_per_out_token": {
									"type": "number",
									"minimum": 0,
									"description": "Credit cost per output token"
								},
								"credits_per_million_in_tokens": {
									"type": "number",
									"minimum": 0,
									"description": "Credit cost per million input tokens"
								},
								"credits_per_million_out_tokens": {
									"type": "number",
									"minimum": 0,
									"description": "Credit cost per million output tokens"
								},
								"credits_per_request": {
									"type": "number",
									"minimum": 0,
									"description": "Credit cost per request"
								},
								"max_retries": {
									"type": "integer",
									"minimum": 0,
									"default": 3,
									"description": "Maximum retry attempts if the provider fails"
								},
								"multiplier": {
									"type": "number",
									"minimum": 0,
									"description": "How much each item counts toward limits (e.g., 2.0 = counts as 2x, effective limit halved)"
								},
								"token_multiplier": {
									"type": "number",
									"minimum": 0.1,
									"description": "How much each token counts toward token limits (e.g., 2.0 = counts as 2x, effective token limit halved)"
								},
								"request_multiplier": {
									"type": "number",
									"minimum": 0.1,
									"description": "How much each request counts toward request limits (e.g., 2.0 = counts as 2x, effective request limit halved)"
								}
							}
						}
					},
					"created": {
						"type": "integer",
						"description": "Unix timestamp of model creation"
					},
					"owned_by": {
						"type": "string",
						"description": "Model owner name"
					}
				}
			}
		}
	},
	"definitions": {
		"rateLimits": {
			"type": "object",
			"description": "Rate limit configuration",
			"additionalProperties": false,
			"properties": {
				"requests_per_minute": {
					"type": "integer",
					"minimum": 1,
					"description": "Max API calls per 60 seconds"
				},
				"requests_per_hour": {
					"type": "integer",
					"minimum": 1,
					"description": "Max API calls per 3600 seconds"
				},
				"requests_per_day": {
					"type": "integer",
					"minimum": 1,
					"description": "Max API calls per 86400 seconds (24 hours)"
				},
				"requests_per_month": {
					"type": "integer",
					"minimum": 1,
					"description": "Max API calls per 2592000 seconds (30 days)"
				},
				"tokens_per_minute": {
					"type": "integer",
					"minimum": 1,
					"description": "Max tokens per 60 seconds"
				},
				"tokens_per_hour": {
					"type": "integer",
					"minimum": 1,
					"description": "Max tokens per 3600 seconds"
				},
				"tokens_per_day": {
					"type": "integer",
					"minimum": 1,
					"description": "Max tokens per 86400 seconds (24 hours)"
				},
				"tokens_per_month": {
					"type": "integer",
					"minimum": 1,
					"description": "Max tokens per 2592000 seconds (30 days)"
				},
				"in_tokens_per_minute": {
					"type": "integer",
					"minimum": 1,
					"description": "Max input tokens per 60 seconds"
				},
				"in_tokens_per_hour": {
					"type": "integer",
					"minimum": 1,
					"description": "Max input tokens per 3600 seconds"
				},
				"in_tokens_per_day": {
					"type": "integer",
					"minimum": 1,
					"description": "Max input tokens per 86400 seconds (24 hours)"
				},
				"in_tokens_per_month": {
					"type": "integer",
					"minimum": 1,
					"description": "Max input tokens per 2592000 seconds (30 days)"
				},
				"out_tokens_per_minute": {
					"type": "integer",
					"minimum": 1,
					"description": "Max output tokens per 60 seconds"
				},
				"out_tokens_per_hour": {
					"type": "integer",
					"minimum": 1,
					"description": "Max output tokens per 3600 seconds"
				},
				"out_tokens_per_day": {
					"type": "integer",
					"minimum": 1,
					"description": "Max output tokens per 86400 seconds (24 hours)"
				},
				"out_tokens_per_month": {
					"type": "integer",
					"minimum": 1,
					"description": "Max output tokens per 2592000 seconds (30 days)"
				},
				"credits_per_minute": {
					"type": "number",
					"minimum": 0,
					"description": "Max credits per 60 seconds (resets at top of minute)"
				},
				"credits_per_hour": {
					"type": "number",
					"minimum": 0,
					"description": "Max credits per hour (resets at top of hour)"
				},
				"credits_per_day": {
					"type": "number",
					"minimum": 0,
					"description": "Max credits per day (resets at midnight UTC)"
				},
				"credits_per_month": {
					"type": "number",
					"minimum": 0,
					"description": "Max credits per month (resets on 1st at 00:00 UTC)"
				}
			}
		}
	}
}
